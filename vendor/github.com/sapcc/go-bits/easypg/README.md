## What's with the `vendoring-helper`?

Since its migration to go.mod with v4.0, `github.com/golang-migrate/migrate`
[pulls in a metric ton of dependencies][migrate-issue]. By the transitive
property, so does easypg since it uses `migrate`. This slows down the initial
build time of all easypg users drastically for no benefit at all, so I'm working
around it.

In the `migrate/` subdirectory, easypg contains a stripped-down copy of `migrate`
containing only the parts that easypg needs. This excerpt is generated by
`./update-migrate.sh` as follows:

- The subdirectory `vendoring-helper/` contains a toy program referencing all
  parts of the `migrate` API that easypg uses. But this directory is its own Go
  module with `go.mod` referencing the actual `migrate` rather than our copy.

- Therefore, `go mod vendor` inside `vendoring-helper/` will collect the desired
  code from upstream `migrate/` into
  `vendoring-helper/vendor/github.com/golang-migrate/migrate/`.

- The script `./update-migrate.sh` then extracts the Go source files from there,
  places them in `migrate/` and rewrites import paths to remove all references
  to upstream `migrate`.

**To update `migrate` to a newer version, adjust `vendoring-helper/go.mod` and
run `./update-migrate.sh`.**

[migrate-issue]: https://github.com/golang-migrate/migrate/issues/174
